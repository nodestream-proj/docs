"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1679],{6897:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>a,frontMatter:()=>d,metadata:()=>c,toc:()=>o});var t=i(4848),s=i(8453);const d={},r="Configuration",c={id:"reference/project-pipeline-configuration",title:"Configuration",description:"Project Configuration",source:"@site/docs/reference/project-pipeline-configuration.md",sourceDirName:"reference",slug:"/reference/project-pipeline-configuration",permalink:"/docs/docs/reference/project-pipeline-configuration",draft:!1,unlisted:!1,editUrl:"https://github.com/nodesteram-proj/docs/tree/main/packages/create-docusaurus/templates/shared/docs/reference/project-pipeline-configuration.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Object Storage",permalink:"/docs/docs/reference/object-storage"},next:{title:"Transformers",permalink:"/docs/docs/reference/transformers"}},l={},o=[{value:"Project Configuration",id:"project-configuration",level:2},{value:"<code>nodestream.yaml</code>",id:"nodestreamyaml",level:3},{value:"Scope",id:"scope",level:3},{value:"Pipeline",id:"pipeline",level:3},{value:"Target",id:"target",level:3},{value:"Plugin",id:"plugin",level:3},{value:"Pipeline Configuration",id:"pipeline-configuration",level:2},{value:"<code>pipeline.yaml</code>",id:"pipelineyaml",level:3},{value:"Step Definition",id:"step-definition",level:3},{value:"Argument Resolution",id:"argument-resolution",level:2},{value:"<code>!include</code>",id:"include",level:3},{value:"<code>!env</code>",id:"env",level:3},{value:"<code>!config</code>",id:"config",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.h2,{id:"project-configuration",children:"Project Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["The project configuration file (",(0,t.jsx)(n.code,{children:"nodestream.yaml"}),") is used to define the project's pipeline and other settings.\nThe file is defined in the following schema:"]}),"\n",(0,t.jsx)(n.h3,{id:"nodestreamyaml",children:(0,t.jsx)(n.code,{children:"nodestream.yaml"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Key"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Required"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"scopes"})}),(0,t.jsxs)(n.td,{children:["The scopes to be used in the pipeline. It is a map of names to ",(0,t.jsx)(n.a,{href:"#scope",children:"Scope"})," instances."]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Map[String, Scope]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{}"})}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"targets"})}),(0,t.jsxs)(n.td,{children:["The targets to be used in the pipeline. It is a map of names to ",(0,t.jsx)(n.a,{href:"#target",children:"Target"})," instances."]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Map[String, Target]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{}"})}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"plugins"})}),(0,t.jsxs)(n.td,{children:["The plugins to be used in the pipeline. It is a list of plugin configs ",(0,t.jsx)(n.a,{href:"#plugin",children:"Plugin"})," instances."]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"List[Plugin]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{}"})}),(0,t.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"scope",children:"Scope"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"Scope"})," is a configuration object that groups like pipelines together.\nScopes can be used as a filter in certain CLI commands to only run pipelines in the specified scope.\nIt is defined in the following schema:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Key"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Required"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"targets"})}),(0,t.jsx)(n.td,{children:"The targets to be used in the pipeline. It is a list of target names."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"List[String]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[]"})}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"annotations"})}),(0,t.jsx)(n.td,{children:"A map of key, value pairs that can be used to annotate the scope. All pipelines in the scope will have these annotations. Annotations serve no functional purpose by default however plugins and your project code may use them for behavior."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Map[String, String]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{}"})}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"config"})}),(0,t.jsxs)(n.td,{children:["A map of key, value pairs that can be used to configure the scope. All pipelines in the scope will have these configuration values present by establishing values for the ",(0,t.jsx)(n.a,{href:"#config",children:(0,t.jsx)(n.code,{children:"!config"})})," resolver."]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Map[String, Any]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{}"})}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"pipelines"})}),(0,t.jsxs)(n.td,{children:["The pipelines to be used in the scope. It is a map of names to ",(0,t.jsx)(n.a,{href:"#pipeline",children:"Pipeline"})," instances."]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"List[Pipeline]"})}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"pipeline",children:"Pipeline"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"Pipeline"})," is a configuration object that acts a reference to and configuration for a pipeline."]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Key"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Required"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"name"})}),(0,t.jsx)(n.td,{children:"The name of the pipeline."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"String"})}),(0,t.jsxs)(n.td,{children:["The name of the file pointed to by ",(0,t.jsx)(n.code,{children:"path"}),". Required if configuring a plugin."]}),(0,t.jsx)(n.td,{children:"Conditionally."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"path"})}),(0,t.jsx)(n.td,{children:"The path to the pipeline file."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"String"})}),(0,t.jsx)(n.td,{children:"N/A; May be set by a plugin if refrenced by name."}),(0,t.jsx)(n.td,{children:"Conditionally."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"annotations"})}),(0,t.jsx)(n.td,{children:"A map of key, value pairs that can be used to annotate the pipeline. Annotations serve no functional purpose by default however plugins and your project code may use them for behavior."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Map[String, String]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{}"})}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"targets"})}),(0,t.jsx)(n.td,{children:"The targets to be used in the pipeline. It is a list of target names."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"List[String]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[]"})}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"exclude_inherited_targets"})}),(0,t.jsx)(n.td,{children:"A boolean flag that determines if the pipeline should exclude targets inherited from the scope."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Boolean"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Instead of a ",(0,t.jsx)(n.code,{children:"Pipeline"}),", you can also use a ",(0,t.jsx)(n.code,{children:"String"})," to reference a pipeline by path.\nFor example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"scopes:\n  foo:\n    pipelines:\n      - path: path/to/pipeline.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"is equivalent to:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"scopes:\n  foo:\n    pipelines:\n      - path/to/pipeline.yaml\n"})}),"\n",(0,t.jsx)(n.h3,{id:"target",children:"Target"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"Target"})," is a configuration object that defines how to connect to a database.\nIt is defined in the following schema:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Key"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Required"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"database"})}),(0,t.jsx)(n.td,{children:"The type of the target. This is used to determine which backend to use to communicate to the database."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"String"})}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"**config"})}),(0,t.jsxs)(n.td,{children:["Additional key, values on the object are directly passed to the backend. See the ",(0,t.jsx)(n.a,{href:"../../category/database-support/",children:"database documentation"})," for more information on how to configure."]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Map"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{}"})}),(0,t.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"plugin",children:"Plugin"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"Plugin"})," is a configuration object that defines a plugin to be used in the pipeline.\nIt is defined in the following schema:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Key"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Required"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"name"})}),(0,t.jsx)(n.td,{children:"The name of the plugin."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"String"})}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"config"})}),(0,t.jsxs)(n.td,{children:["A map of key, value pairs that can be used to configure the plugin by establishing values for the ",(0,t.jsx)(n.a,{href:"#config",children:(0,t.jsx)(n.code,{children:"!config"})})," resolver."]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Map"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{}"})}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"targets"})}),(0,t.jsx)(n.td,{children:"The targets to be used in the plugin implicitly. It is a list of target names."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"List[String]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[]"})}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"annotations"})}),(0,t.jsx)(n.td,{children:"A map of key, value pairs that can be used to annotate the plugin. Annotations serve no functional purpose by default however plugins and your project code may use them for behavior."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Map[String, String]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{}"})}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"pipelines"})}),(0,t.jsxs)(n.td,{children:["A list of ",(0,t.jsx)(n.a,{href:"#pipeline",children:"Pipeline"})," instances used to configure pipelines provided by the plugin."]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"List[Pipeline]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[]"})}),(0,t.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"pipeline-configuration",children:"Pipeline Configuration"}),"\n",(0,t.jsx)(n.p,{children:"The pipeline configuration file is used to define the pipeline's steps and settings.\nThe file is defined in the following schema:"}),"\n",(0,t.jsx)(n.h3,{id:"pipelineyaml",children:(0,t.jsx)(n.code,{children:"pipeline.yaml"})}),"\n",(0,t.jsxs)(n.p,{children:["The pipeline configuration file is a list of steps that are executed in order. See the ",(0,t.jsx)(n.a,{href:"#stepdefinition",children:"step definition"})," for more information on how to define a step."]}),"\n",(0,t.jsx)(n.h3,{id:"step-definition",children:"Step Definition"}),"\n",(0,t.jsx)(n.p,{children:"A step is a configuration object that defines a single unit of work in the pipeline.\nIt is defined in the following schema:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Key"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Required"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"implementation"})}),(0,t.jsxs)(n.td,{children:["The python path to the step implementation. The path is defined as ",(0,t.jsx)(n.code,{children:"module.path:object"}),"."]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"String"})}),(0,t.jsx)(n.td,{children:"N/A"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"arguments"})}),(0,t.jsxs)(n.td,{children:["The arguments to be passed to the step implementation. Arguments are passed to the ",(0,t.jsx)(n.code,{children:"factor"})," method as key word arguments on the supplied class. By default this method passes those arguments to class's constructor."]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Dict[str, Any]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{}"})}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"annotations"})}),(0,t.jsxs)(n.td,{children:["A list of strings that can be used to annotate the step. If annotations are passed from ",(0,t.jsx)(n.code,{children:"nodestream run"}),", then the only steps that are loaded are ones that are not annotated or have at least one matching annotation."]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"List[String]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[]"})}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"factory"})}),(0,t.jsxs)(n.td,{children:["The name of the ",(0,t.jsx)(n.code,{children:"@classmethod"})," on the step class that is used to create the step. This is useful for steps that need to be created in different ways.  If set, ",(0,t.jsx)(n.code,{children:"arguments"})]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"String"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"from_file_data"})}),(0,t.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"argument-resolution",children:"Argument Resolution"}),"\n",(0,t.jsx)(n.h3,{id:"include",children:(0,t.jsx)(n.code,{children:"!include"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"!include"})," directive is used to include a file in line.\nThe file is included as if it were part of the original file.\nThis is useful for breaking up large configuration files into smaller, more manageable pieces."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"!include path/to/file.yaml\n"})}),"\n",(0,t.jsx)(n.h3,{id:"env",children:(0,t.jsx)(n.code,{children:"!env"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"!env"})," directive is used to include an environment variable in line.\nThe environment variable is included as if it were part of the original file.\nThis is useful for including sensitive information, such as API keys, without hardcoding them in the configuration file."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"!env MY_API\n"})}),"\n",(0,t.jsx)(n.h3,{id:"config",children:(0,t.jsx)(n.code,{children:"!config"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"!config"})," directive is used to include a configuration value in line.\nThe configuration value is included as if it were part of the original file.\nThis is useful for including sensitive information, such as API keys, without hardcoding them in the configuration file.\nThe config decorator is specifically useful for decoupling configuration values required by the pipeline from the pipeline configuration itself."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"!config my.config.key\n"})})]})}function a(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var t=i(6540);const s={},d=t.createContext(s);function r(e){const n=t.useContext(d);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);